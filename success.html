<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>決済完了</title>

  <!-- LIFF SDK -->
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

  <style>
    body{
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,
      "Hiragino Kaku Gothic ProN","Noto Sans JP",sans-serif;
      background:#fff; margin:0; padding:24px; color:#111;
    }
    .card{
      max-width:560px; margin:40px auto; padding:22px;
      border:1px solid #e5e7eb; border-radius:16px;
    }
    h1{ font-size:20px; margin:0 0 12px; }
    p{ line-height:1.6; margin:10px 0; }
    .muted{ color:#6b7280; font-size:14px; }
    .btn{
      display:block; width:100%;
      text-align:center; text-decoration:none;
      padding:14px 16px; border-radius:12px;
      margin-top:12px; border:1px solid #e5e7eb;
      background:#f9fafb; color:#111;
    }
    .btn.primary{ background:#06c755; color:#fff; border-color:#06c755; }
    .status{
      margin-top:12px; padding:10px 12px;
      background:#f3f4f6; border-radius:12px; font-size:14px;
    }
    code{ background:#f3f4f6; padding:2px 6px; border-radius:6px; }
  </style>
</head>

<body>
  <div class="card">
    <h1>✅ 決済が完了しました</h1>
    <p>このあと入力フォームへ自動で移動します。</p>
    <p class="muted">うまく移動しない場合は、下のボタンを押してください。</p>

    <div class="status" id="status">準備中…</div>

    <a class="btn primary" id="goForm" href="#">入力フォームへ進む</a>
    <a class="btn" href="line://">LINEアプリを開く（保険）</a>

    <p class="muted" style="margin-top:14px;">
      目安：<code>1.5秒</code>後に自動遷移します。
    </p>
  </div>

  <script>
    // ★ Googleフォーム入力用LIFF
    const LIFF_ID = "2008777809-IHfmxD85";

    // ★ あなたのGoogleフォームURL（受領済み）
    const GOOGLE_FORM_URL =
      "https://docs.google.com/forms/d/e/1FAIpQLSeUVjtH30VVX-D9KSRPt5UTOKTip_9MA513jNv-czjptu3EVQ/viewform?usp=dialog";

    const statusEl = document.getElementById("status");
    const goForm = document.getElementById("goForm");

    function setStatus(text){ statusEl.textContent = text; }
    function gotoForm(){ window.location.href = GOOGLE_FORM_URL; }

    // ボタンにもURLを反映
    goForm.href = GOOGLE_FORM_URL;

    async function main() {
      try {
        setStatus("LIFF初期化中…");
        await liff.init({ liffId: LIFF_ID });

        // LINE内で開けているか
        if (liff.isInClient()) {
          setStatus("決済完了！入力フォームへ移動します…");
        } else {
          // Safari等で開かれた場合でもフォームへ進める
          setStatus("入力フォームへ移動します…（外部ブラウザ）");
        }

        // 少し待ってからフォームへ
        setTimeout(gotoForm, 1500);

      } catch (e) {
        // 失敗してもフォームへ進む
        setStatus("入力フォームへ移動します…");
        setTimeout(gotoForm, 500);
      }
    }

    main();
  </script>
</body>
</html>
